# Light Keepers Platform - Domain Map (SSOT)
# This file maps 7 workflow domains to their backend modules, frontend pages, and key routes.
# Route paths match T1-routes-guards-mapping.json format (without /api/v1 prefix)
#
# ⚠️ IMPORTANT: This file is validated by CI/CD audit-gates (G6).
# Before adding module references, ensure the module exists in backend/src/modules/
# Run: pwsh tools/audit/check-domain-map.ps1 to verify locally

version: "1.2"
lastUpdated: "2026-02-01T23:44:45+08:00"
generatedAt: "2026-02-01T23:44:45+08:00"
generator: "tools/audit/generate-domain-map.ps1@1.2.0"
commitSha: "27d02b313fc5e597f920e077d99cca58d783458f"

domains:
  # ============================================================
  # C2 - Command & Control (指揮控制)
  # ============================================================
  c2:
    name: 指揮控制
    description: 事件管理、任務派遣、檢傷分類、任務指揮
    modules:
      - events
      - tasks
      - task-dispatch
      - triage
      - mission-sessions
      - field-reports
      - drill-simulation
    pages:
      - CommandCenterPage
      - EventsPage
      - TasksPage
      - TriagePage
      - MissionCommandPage
      - EmergencyResponsePage
    keyRoutes:
      - /events
      - /tasks
      - /triage
      - /mission-sessions

  # ============================================================
  # Geo - Geographic Intelligence (地理情資)
  # ============================================================
  geo:
    name: 地理情資
    description: 戰術地圖、圖層疊加、POI 標記、路線規劃
    modules:
      - tactical-maps
      - overlays
      - location
      - routing
    pages:
      - TacticalMapPage
      - MapPage
      - CommandPostMapPage
    keyRoutes:
      - /tactical-maps
      - /location

  # ============================================================
  # Log - Logistics & Resources (後勤資源)
  # ============================================================
  log:
    name: 後勤資源
    description: 物資管理、設備追蹤、捐贈管理、車輛調度
    modules:
      - resources
      - equipment
      - donations
      - water-resources
      - resource-matching
      - resource-optimization
    pages:
      - ResourcesPage
      - EquipmentPage
      - DonationsPage
      - VehicleManagementPage
    keyRoutes:
      - /resources
      - /equipment
      - /donations

  # ============================================================
  # HR - Human Resources (人力動員)
  # ============================================================
  hr:
    name: 人力動員
    description: 志工管理、排班、出勤、訓練、組織圖
    modules:
      - volunteers
      - volunteer-certification
      - volunteer-points
      - training
      - attendance
      - shift-calendar
      - org-chart
      - scheduler
      - payroll
    pages:
      - VolunteersPage
      - VolunteerDetailPage
      - TrainingPage
      - AttendancePage
      - ShiftCalendarPage
      - OrgChartPage
      - VolunteerSchedulePage
    keyRoutes:
      - /volunteers
      - /training
      - /attendance
      - /shift-calendar

  # ============================================================
  # Community - Community Governance (社區治理)
  # ============================================================
  community:
    name: 社區治理
    description: 社區聯繫、家屬團聚、心理健康
    modules:
      - community
      - reunification
      - psychological-support
    pages:
      - CommunityPage
      - ReunificationPage
      - MentalHealthPage
    keyRoutes:
      - /community
      - /reunification

  # ============================================================
  # Analytics - Analytics & Reporting (分析報表)
  # ============================================================
  analytics:
    name: 分析報表
    description: 數據分析、報表產生、排行榜
    modules:
      - analytics
      - reports
      - reporting-engine
      - trend-prediction
      - performance-report
    pages:
      - AnalyticsPage
      - ReportPage
      - LeaderboardPage
      - PointsReportPage
      - ReportsAdminPage
    keyRoutes:
      - /analytics
      - /reports

  # ============================================================
  # Core - Platform Governance (平台治理)
  # ============================================================
  core:
    name: 平台治理
    description: 認證、權限管理、系統備份、審計
    modules:
      - auth
      - accounts
      - tenants
      - backup
      - audit
      - notifications
      - system
      - integrations
      - webhooks
    pages:
      - ProfilePage
      - PermissionsPage
      - BackupPage
      - AuditLogPage
      - AccountPage
      - TwoFactorSetupPage
    keyRoutes:
      - /auth
      - /accounts

# ============================================================
# Cross-Domain Services (跨領域服務)
# ============================================================
crossDomain:
  ai:
    modules:
      - ai-platform
      - ai-queue
      - chatbot-assistant
      - voice-assistant
    description: AI 服務、預測、自然語言處理

  realtime:
    modules:
      - realtime
      - realtime-chat
      - ptt
      - voice
      - offline-mesh
    description: 即時通訊、對講機、離線網狀網路

  integrations:
    modules:
      - line-bot
      - line-notify
      - line-liff
      - ncdr-alerts
      - weather-service
      - tccip-climate
    description: 外部整合、LINE Bot、災害預警

  media:
    modules:
      - drone-ops
      - media-streaming
    description: 無人機、媒體串流
