# Light Keepers å…‰å®ˆè­·è€…ç½é˜²å¹³å°

## ç³»çµ±æ¶æ§‹èˆ‡è¦æ ¼ç¸½è¦½

> **ç‰ˆæœ¬**: v40.6 | **æ›´æ–°æ—¥æœŸ**: 2026-01-07

---

## ğŸ“Š å¹³å°æ¦‚è¿°

**Light Keepers** æ˜¯å°ç£ç½å®³æ‡‰è®Šèˆ‡ç·Šæ€¥æ•‘æ´å”èª¿å¹³å°ï¼Œæ¡ç”¨ **æ¨¡çµ„åŒ–å–®é«”æ¶æ§‹ (Modular Monolith)**ï¼Œæ•´åˆ 169 å€‹åŠŸèƒ½æ¨¡çµ„è‡³ 9 å€‹æ ¸å¿ƒæˆ°ç•¥é ˜åŸŸã€‚

---

## ğŸ›ï¸ 9 Strategic Domains (æ ¸å¿ƒåˆ†é¡æ¶æ§‹)

| # | Domain | ä¸­æ–‡ | AI Agent | æ ¸å¿ƒè·è²¬ |
|---|--------|------|----------|----------|
| 1 | **Air-Ops** | ç©ºä¸­ä½œæ¥­ | Scout Agent | ç„¡äººæ©Ÿæ“æ§ã€èˆªæ‹å½±åƒåˆ†æã€é »è­œç›£æ¸¬ã€é›¢ç·šç¶²ç‹€ç¶²è·¯ |
| 2 | **Mission Command** | ä»»å‹™æŒ‡æ® | Dispatcher Agent | ä»»å‹™å ´æ¬¡ã€ä»»å‹™åˆ†æ´¾ã€æª¢å‚·åˆ†é¡ã€ç¾å ´å›å ±ã€ç–²å‹ç›£æ¸¬ |
| 3 | **Geo-Intel** | åœ°ç†æƒ…å ± | Intel Agent | æˆ°è¡“åœ°åœ–ã€æ°£è±¡æ•´åˆã€NCDRè­¦å ±ã€ç¤¾ç¾¤åª’é«”ç›£æ§ã€3Dæ²™ç›¤ |
| 4 | **Logistics** | ç‰©è³‡å¾Œå‹¤ | Forecaster Agent | ç‰©è³‡åº«å­˜ã€ææ¬¾è¿½è¹¤ã€è¨­å‚™å€Ÿé‚„ã€ä¾›æ‡‰éˆå€å¡Šéˆ |
| 5 | **Connectivity** | é€šè¨Šé€£æ¥ | - | LINE Botã€æ¨æ’­é€šçŸ¥ã€PTTå°è¬›ã€é›¢ç·šåŒæ­¥ã€è¡›æ˜Ÿé€šè¨Š |
| 6 | **Data Insight** | æ•¸æ“šæ´å¯Ÿ | - | å ±è¡¨åˆ†æã€å„€è¡¨æ¿ã€ç¨½æ ¸æ—¥èªŒã€GDPRåˆè¦ã€å€å¡Šéˆå¸³æœ¬ |
| 7 | **Workforce** | äººåŠ›è³‡æº | - | å¿—å·¥ç®¡ç†ã€å‡ºå‹¤æ‰“å¡ã€åŸ¹è¨“èªè­‰ã€çµ„ç¹”æ¶æ§‹ã€è–ªè³‡æ ¸ç®— |
| 8 | **Community** | ç¤¾å€æœå‹™ | - | ç½æ°‘å”å°‹ã€å…¬æ°‘Appã€å¿ƒç†æ”¯æŒã€ç¾¤çœ¾å›å ±ã€ç¤¾å€éŸŒæ€§ |
| 9 | **Core** | æ ¸å¿ƒå®‰å…¨ | - | èªè­‰æˆæ¬Šã€å¤šç§Ÿæˆ¶ã€å‚™ä»½é‚„åŸã€åœ‹éš›åŒ–ã€å¥åº·æª¢æŸ¥ |

---

## ğŸ¤– AI Agents (è‡ªä¸»é‹ä½œä»£ç†)

| Agent | æ‰€å±¬ Domain | åŠŸèƒ½æè¿° |
|-------|-------------|----------|
| **Scout Agent** | Air-Ops | ç„¡äººæ©Ÿç¾¤è‡ªå‹•å·¡é‚ã€ç½æƒ…åµæ¸¬ã€å½±åƒå›å‚³ |
| **Intel Agent** | Geo-Intel | ç¤¾ç¾¤åª’é«”ç½æƒ…æŠ“å–ã€æƒ…å ±èšåˆã€ç†±é»åˆ†æ |
| **Dispatcher Agent** | Mission Command | æ™ºæ…§æ´¾é£ã€ç–²å‹è¼ªæ›¿ã€START æª¢å‚·å„ªå…ˆåº |
| **Forecaster Agent** | Logistics | ç‰©è³‡éœ€æ±‚é æ¸¬ã€è‡ªå‹•æ¡è³¼å»ºè­°ã€æè´ˆåª’åˆ |

---

## ğŸ“¦ æ¨¡çµ„æ¸…å–® (169 Modules)

### æ ¸å¿ƒåŸºç¤

| æ¨¡çµ„ | åŠŸèƒ½ |
|------|------|
| `DatabaseModule` | Cloud SQL é€£ç·šã€TypeORM æ•´åˆ |
| `SharedAuthModule` | JWT èªè­‰ã€Guard å…±äº« |
| `ConfigModule` | ç’°å¢ƒè®Šæ•¸ç®¡ç† |
| `ScheduleModule` | å®šæ™‚ä»»å‹™æ’ç¨‹ |
| `ThrottlerModule` | API é€Ÿç‡é™åˆ¶ |

### å¸³æˆ¶èˆ‡èªè­‰

| æ¨¡çµ„ | åŠŸèƒ½ |
|------|------|
| `AuthModule` | ç™»å…¥/ç™»å‡ºã€OAuthã€JWT |
| `AccountsModule` | ä½¿ç”¨è€…å¸³æˆ¶ CRUD |
| `PublicModule` | Level 0 å…¬é–‹ç«¯é» (å…ç™»å…¥) |
| `AccessLogModule` | å­˜å–æ—¥èªŒç´€éŒ„ |

### å¿—å·¥èˆ‡ä»»å‹™

| æ¨¡çµ„ | åŠŸèƒ½ |
|------|------|
| `VolunteersModule` | å¿—å·¥è¨»å†Šã€å¯©æ ¸ã€æŠ€èƒ½ç®¡ç† |
| `TasksModule` | ä»»å‹™æŒ‡æ´¾èˆ‡è¿½è¹¤ |
| `TrainingModule` | è¨“ç·´èª²ç¨‹èˆ‡èªè­‰ |
| `EventsModule` | äº‹ä»¶/ç½æƒ…ç®¡ç† |

### è³‡æºèˆ‡ç‰©è³‡

| æ¨¡çµ„ | åŠŸèƒ½ |
|------|------|
| `ResourcesModule` | ç‰©è³‡åº«å­˜ç®¡ç† |
| `DonationsModule` | ææ¬¾èˆ‡é‡‘æµ |
| `EquipmentModule` | è¨­å‚™å€Ÿé‚„ç®¡ç† |

### é€šè¨Šèˆ‡é€šçŸ¥

| æ¨¡çµ„ | åŠŸèƒ½ |
|------|------|
| `NotificationsModule` | æ¨æ’­é€šçŸ¥ç®¡ç† |
| `LineBotModule` | LINE èŠå¤©æ©Ÿå™¨äºº |
| `RealtimeModule` | WebSocket å³æ™‚é€šè¨Š |
| `PttModule` | PTT å°è¬›æ©Ÿ (WebRTC) |

### å ±è¡¨èˆ‡åˆ†æ

| æ¨¡çµ„ | åŠŸèƒ½ |
|------|------|
| `ReportsModule` | ç½æƒ…å›å ± CRUD |
| `AnalyticsModule` | AI è¶¨å‹¢é æ¸¬ |
| `DashboardModule` | å³æ™‚ KPI ç›£æ§ |

### ç·Šæ€¥æ‡‰è®Š

| æ¨¡çµ„ | åŠŸèƒ½ |
|------|------|
| `MissionSessionsModule` | ä»»å‹™å ´æ¬¡ç®¡ç† |
| `TriageModule` | E-Triage æª¢å‚·åˆ†é¡ (START) |
| `FieldReportsModule` | ç¾å ´å³æ™‚å›å ± |
| `OverlaysModule` | æˆ°è¡“åœ°åœ–åœ–å±¤ |

### å¤–éƒ¨æ•´åˆ

| æ¨¡çµ„ | åŠŸèƒ½ |
|------|------|
| `NcdrAlertsModule` | åœ‹å®¶ç½é˜²ä¸­å¿ƒè­¦å ±åŒæ­¥ |
| `WeatherForecastModule` | æ°£è±¡é å ± API |
| `Fire119Module` | æ¶ˆé˜²ç½² 119 æ´¾é£ä»‹æ¥ |

### é€²éšåŠŸèƒ½ (v2.0+)

| æ¨¡çµ„ | åŠŸèƒ½ |
|------|------|
| `DrillSimulationModule` | ç½å®³æ¼”ç·´æ¨¡æ“¬å™¨ |
| `OfflineMeshModule` | é›¢ç·šç¶²ç‹€ç¶²è·¯ (LoRa) |
| `ReunificationModule` | ç½æ°‘å”å°‹ (AI ç›¸ç‰‡æ¯”å°) |
| `DroneOpsModule` | ç„¡äººæ©Ÿæ“æ§èˆ‡ FPV |
| `TacticalMapsModule` | 3D æˆ°è¡“æ¨™è¨˜ (MIL-STD-2525) |
| `ArNavigationModule` | WebXR AR ç½å ´å°èˆª |
| `BlockchainModule` | ç‰©è³‡ä¾›æ‡‰éˆå€å¡Šéˆè¿½è¹¤ |

---

## ğŸ” æ¬Šé™ç­‰ç´šæ¨¡å‹ (Level 0-5)

| Level | è§’è‰² | é¡å‹ | ä¸»è¦æ¬Šé™ |
|:-----:|------|------|----------|
| **L0** | å…¬çœ¾ | åŒ¿å | å…¬é–‹è­¦å ±ã€æ°£è±¡ã€é¿é›£åœ°åœ– |
| **L1** | å¿—å·¥ | èªè­‰ç”¨æˆ¶ | å€‹äººåŸ¹è¨“ã€ä»»å‹™æŸ¥çœ‹ã€å›å ±æäº¤ |
| **L2** | å¹¹éƒ¨ | å·¥ä½œäººå“¡ | åœ˜éšŠç®¡ç†ã€ä»»å‹™æ´¾é£ã€ç¨½æ ¸ |
| **L3** | å¸¸å‹™ç†äº‹ | ç®¡ç†å“¡ | è·¨ä»»å‹™è³‡æºèª¿é… |
| **L4** | ç†äº‹é•· | é«˜éšä¸»ç®¡ | çµ„ç¹”ç¸½è¦½ã€é«˜å±¤æ±ºç­–æ—¥èªŒ |
| **L5** | ç³»çµ±æ“æœ‰è€… | è¶…ç´šç®¡ç†å“¡ | å…¨åŸŸç³»çµ±è¨­å®šã€é‡‘é‘°ç®¡ç† |

### æ¬Šé™æ§åˆ¶æ©Ÿåˆ¶

- **`UnifiedRolesGuard`**: æª¢æŸ¥ JWT ä¸­çš„ ROLE_LEVELS (0-5)
- **`ResourceOwnerGuard`**: é˜²æ­¢ IDOR æ”»æ“Šï¼Œé©—è­‰è³‡æ–™æ‰€æœ‰æ¬Š
- **`PublicController`**: `/api/v1/public/*` å°ˆç”¨ç«¯é»ï¼ŒL0 è¨ªå•

---

## ğŸ¨ UI/UX è¨­è¨ˆè¦ç¯„

### é›™ä¸»é¡Œç³»çµ±

#### Theme A - Dark Brown (æˆ°è¡“æ•‘æ´é¢¨æ ¼)

| å±¬æ€§ | è‰²å€¼ |
|------|------|
| ä¸»èƒŒæ™¯ | `#3D2E24` |
| æ¬¡èƒŒæ™¯ | `#4A3728` |
| å¡ç‰‡èƒŒæ™¯ | `#5C4739` |
| ä¸»æ–‡å­— | `#FAF8F5` |
| å¼·èª¿è‰² | `#C4A77D` (Gold) |

#### Theme B - Light Beige (äººé“æ•‘æ´é¢¨æ ¼)

| å±¬æ€§ | è‰²å€¼ |
|------|------|
| ä¸»èƒŒæ™¯ | `#FAF8F5` |
| æ¬¡èƒŒæ™¯ | `#F5EDE4` |
| å¡ç‰‡èƒŒæ™¯ | `#FFFFFF` |
| ä¸»æ–‡å­— | `#3D2E24` |
| å¼·èª¿è‰² | `#B8976F` (Gold) |

### å“ç‰Œé…è‰²

#### Brown ç³»åˆ— (ä¸»å“ç‰Œ)

- `#3D2E24` (900) â†’ `#B5A595` (300)

#### Beige ç³»åˆ— (åŒ—æ­æº«æš–)

- `#FDFCFB` (50) â†’ `#C4B5A5` (500)

#### Gold ç³»åˆ— (å¼·èª¿)

- `#D4BC96` (300) â†’ `#8F7352` (700)

#### èªæ„è‰²å½©

| ç”¨é€” | ä¸»è‰² |
|------|------|
| Success | `#6B8E5C` |
| Warning | `#C9A256` |
| Danger | `#B85C5C` |
| Info | `#5C7B8E` |

### å­—é«”è¦ç¯„

```css
--font-family-primary: 'Inter', 'Noto Sans TC', sans-serif;
--font-family-monospace: 'JetBrains Mono', monospace;
```

| å±¤ç´š | å¤§å° |
|------|------|
| 2xs | 10px |
| xs | 11px |
| sm | 12px |
| base | 14px |
| md | 16px |
| lg | 18px |
| xl | 20px |
| 2xl | 24px |
| 3xl | 28px |

### é–“è·ç³»çµ±

- `4px` (spacing-1) â†’ `96px` (spacing-24)

### åœ“è§’ç³»çµ±

| Token | Value | ç”¨é€” |
|-------|-------|------|
| sm | 4px | å°å‹å…ƒä»¶ |
| md | 8px | æ¨™æº–å…ƒä»¶ |
| lg | 12px | æŒ‰éˆ•/è¼¸å…¥æ¡† |
| xl | 16px | å¡ç‰‡ |
| 2xl | 20px | å¤§å¡ç‰‡ |
| 3xl | 24px | Modal |

### é™°å½±èˆ‡æ•ˆæœ

```css
--shadow-sm: 0 1px 3px rgba(61, 46, 36, 0.08);
--shadow-md: 0 4px 6px rgba(61, 46, 36, 0.08);
--shadow-lg: 0 10px 15px rgba(61, 46, 36, 0.10);
--glass-bg: rgba(255, 255, 255, 0.7);
--glass-blur: 20px;
```

### éŸ¿æ‡‰å¼æ–·é»

| æ–·é» | å¯¬åº¦ |
|------|------|
| Desktop | > 768px |
| Tablet | â‰¤ 768px |
| Mobile | â‰¤ 480px |

### Layout å°ºå¯¸

| å…ƒç´  | å°ºå¯¸ |
|------|------|
| Navbar | 64px |
| Sidebar | 280px |
| Sidebar (collapsed) | 80px |

---

## ğŸ“‚ å‰ç«¯ Domain é é¢çµæ§‹

```
src/pages/domains/
â”œâ”€â”€ air-ops/           # 1 é é¢
â”œâ”€â”€ mission-command/   # 5 é é¢
â”œâ”€â”€ geo-intel/         # 5 é é¢
â”œâ”€â”€ logistics/         # 7 é é¢
â”œâ”€â”€ connectivity/      # 2 é é¢
â”œâ”€â”€ data-insight/      # 8 é é¢
â”œâ”€â”€ workforce/         # 10 é é¢
â”œâ”€â”€ community/         # 4 é é¢
â””â”€â”€ core/              # 9 é é¢
```

**Total: 51 é é¢**

---

## ğŸ› ï¸ æŠ€è¡“å †ç–Š

### Backend

- **Runtime**: Node.js 20+
- **Framework**: NestJS 11
- **ORM**: TypeORM 0.3
- **Database**: PostgreSQL (Cloud SQL)
- **Cache**: Redis
- **Queue**: Bull

### Frontend

- **Framework**: React 18 + TypeScript
- **Build**: Vite 6
- **State**: TanStack Query
- **Routing**: React Router 7
- **PWA**: Vite PWA Plugin

### Infrastructure

- **Cloud**: Google Cloud Platform
- **Compute**: Cloud Run
- **CI/CD**: Cloud Build
- **Storage**: Cloud Storage
- **Secrets**: Secret Manager

---

*æ–‡ä»¶ç”± AI è‡ªå‹•ç”Ÿæˆ | æœ€å¾Œæ›´æ–°: 2026-01-07*
