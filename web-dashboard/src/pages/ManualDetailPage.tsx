import { useParams, useNavigate } from 'react-router-dom';
import { Card, Badge, Button } from '../design-system';

// 手冊分類
const MANUAL_CATEGORIES: Record<string, { name: string; icon: string; color: string }> = {
    earthquake: { name: '地震', icon: '🌍', color: '#5BA3C0' },
    typhoon: { name: '颱風水災', icon: '🌀', color: '#7B6FA6' },
    fire: { name: '火災', icon: '🔥', color: '#E85A5A' },
    firstaid: { name: '急救', icon: '❤️', color: '#E53935' },
    shelter: { name: '避難', icon: '🏠', color: '#4CAF50' },
    war: { name: '戰爭', icon: '⚔️', color: '#607D8B' },
    nuclear: { name: '核化災害', icon: '☢️', color: '#FF9800' },
    infrastructure: { name: '設施故障', icon: '⚡', color: '#795548' },
    outdoor: { name: '戶外活動', icon: '🏕️', color: '#2E7D32' },
    radio: { name: '無線電通訊', icon: '📻', color: '#1565C0' },
};

// 擴展型手冊內容類型
interface ManualSection {
    title: string;
    content: string;
    items?: { title: string; content: string }[];
    table?: { headers: string[]; rows: string[][] };
}

interface FAQ {
    question: string;
    answer: string;
}

interface Checklist {
    title: string;
    items: string[];
}

// 手冊詳細內容
const MANUAL_CONTENTS: Record<string, {
    categoryId: string;
    title: string;
    summary: string;
    tags: string[];
    content: string;
    steps?: { title: string; content: string }[];
    tips?: string[];
    warning?: string;
    // 擴展欄位
    sections?: ManualSection[];
    faq?: FAQ[];
    checklists?: Checklist[];
    pocketCard?: string[];
    searchTags?: string[];
}> = {
    // ===== 地震 (3) =====
    'eq-1': {
        categoryId: 'earthquake',
        title: '地震發生時的「趴下、掩護、穩住」',
        summary: '地震來臨時的基本自保動作',
        tags: ['基礎', '室內'],
        content: '地震發生時，正確的應變動作可以大幅降低受傷風險。記住三個關鍵動作：趴下(DROP)、掩護(COVER)、穩住(HOLD ON)。',
        steps: [
            { title: '1. 趴下 (DROP)', content: '立即趴下，雙手雙膝著地，降低重心避免被搖晃摔倒。' },
            { title: '2. 掩護 (COVER)', content: '移動到堅固的桌子下方，用手臂保護頭部和頸部。如果附近沒有桌子，靠著內牆蹲下，雙手護住頭頸。' },
            { title: '3. 穩住 (HOLD ON)', content: '緊握桌腳，準備隨著桌子移動。保持姿勢直到搖晃停止。' },
        ],
        tips: ['遠離窗戶、吊燈、書架等可能掉落的物品', '不要試圖跑出建築物，樓梯是最危險的地方', '如果在床上，留在原地並用枕頭保護頭部'],
        warning: '切勿躲在「黃金三角」！這是錯誤的觀念，已被多國地震專家否定。',
    },
    'eq-2': {
        categoryId: 'earthquake',
        title: '地震後的安全確認步驟',
        summary: '震後應立即確認的安全事項',
        tags: ['震後', '安全確認'],
        content: '地震停止後，不要急著離開，先進行安全確認，確保沒有立即的危險。',
        steps: [
            { title: '1. 確認自身安全', content: '檢查自己是否受傷，如有傷口先進行簡單處理。' },
            { title: '2. 確認周圍環境', content: '觀察是否有建築結構損壞、瓦斯外洩的氣味、電線走火等危險。' },
            { title: '3. 關閉瓦斯總開關', content: '如果安全的話，關閉瓦斯總開關以防止火災。' },
            { title: '4. 穿上鞋子', content: '地上可能有碎玻璃或尖銳物品，穿上堅固的鞋子再移動。' },
        ],
        tips: ['使用手電筒而非蠟燭，避免因瓦斯洩漏引發火災', '收聽電台或電視的官方災情報導', '準備迎接餘震，可能比主震更強'],
    },
    'eq-3': {
        categoryId: 'earthquake',
        title: '室外遭遇地震的應變方法',
        summary: '在戶外時地震的正確應對',
        tags: ['戶外', '避難'],
        content: '在戶外遇到地震時，應遠離建築物、電線桿、廣告招牌等可能倒塌的物體，尋找開闊地帶蹲下保護頭部。',
        steps: [
            { title: '1. 遠離建築物', content: '立即遠離建築物外牆、玻璃帷幕、廣告招牌、電線桿等。' },
            { title: '2. 尋找開闘空地', content: '移動到公園、廣場等開闘地帶，蹲下並保護頭部。' },
            { title: '3. 開車時靠邊停車', content: '如果在開車，緩慢減速並靠邊停車，避開橋樑、隧道、高架道路。' },
            { title: '4. 遠離海岸', content: '如果在海邊，地震後應立即往高處移動，防範海嘯。' },
        ],
        tips: ['遠離山坡邊緣，可能發生落石或土石流', '不要進入損壞的建築物', '如在人群中，冷靜移動避免踩踏'],
    },
    // ===== 颱風水災 (3) =====
    'ty-1': {
        categoryId: 'typhoon',
        title: '颱風來臨前的防災準備',
        summary: '颱風警報發布後應準備的物資與措施',
        tags: ['準備', '物資'],
        content: '颱風警報發布後，應盡速完成防災準備工作，確保居家安全並儲備必要物資。',
        steps: [
            { title: '1. 儲備飲水食物', content: '準備至少 3 天份的飲用水和不需烹煮的食物。' },
            { title: '2. 固定門窗', content: '檢查並固定門窗，必要時貼上膠帶減少玻璃飛濺。' },
            { title: '3. 清理排水溝', content: '清除陽台、屋頂排水孔的落葉雜物，保持排水暢通。' },
            { title: '4. 收置戶外物品', content: '將花盆、曬衣架、廣告旗幟等戶外物品收入室內。' },
            { title: '5. 充電備電', content: '手機、行動電源、手電筒等設備充滿電。' },
        ],
        tips: ['提前購買必要藥品', '確認家人聯絡方式和集合地點', '將車輛停放在安全位置'],
    },
    'ty-2': {
        categoryId: 'typhoon',
        title: '淹水時的緊急應變措施',
        summary: '住家開始淹水時的處理步驟',
        tags: ['淹水', '應變'],
        content: '當水位開始上升時，應冷靜判斷情勢並採取正確的應變措施，保護自身安全。',
        steps: [
            { title: '1. 關閉電源', content: '當水位到達電器插座高度前，立即關閉總電源開關，避免觸電。' },
            { title: '2. 往高處移動', content: '將重要物品移至高處，人員移動到二樓或更高樓層。' },
            { title: '3. 避免涉水外出', content: '淹水時能見度低，可能有坑洞、電線、蓋子移位的水溝等危險。' },
            { title: '4. 求救通報', content: '如有生命危險，立即撥打 119 或使用手機發送位置求援。' },
        ],
        tips: ['穿著長褲長靴保護雙腳', '如必須涉水，使用棍棒探路', '注意水中可能有蛇或其他動物'],
        warning: '絕對不要試圖開車穿越淹水區域！30 公分水深就可能使車輛失控。',
    },
    'ty-3': {
        categoryId: 'typhoon',
        title: '土石流警戒與避難時機',
        summary: '如何判斷土石流危險並及時撤離',
        tags: ['土石流', '撤離'],
        content: '土石流通常發生在暴雨或颱風期間的山區。認識警戒訊號並及時撤離是保命關鍵。',
        steps: [
            { title: '1. 注意警戒區域', content: '查詢住家是否位於土石流潛勢區，可至水土保持局網站查詢。' },
            { title: '2. 監控雨量', content: '持續暴雨超過警戒雨量時，應準備撤離。' },
            { title: '3. 觀察前兆訊號', content: '溪水變混濁、水位異常暴漲或暴降、山上傳來異常聲響。' },
            { title: '4. 立即撤離', content: '發現警戒訊號時，不要猶豫，立即往高處或避難所撤離。' },
        ],
        tips: ['不要沿溪谷方向逃生，應往兩側高處跑', '撤離時帶上避難包', '隨時注意土石流警戒簡訊'],
        warning: '土石流速度極快，發現時通常只有數秒反應時間，切勿「觀望」或「返回拿東西」！',
    },
    // ===== 火災 (3) =====
    'fr-1': {
        categoryId: 'fire',
        title: '火災逃生的基本原則',
        summary: '遭遇火災時的逃生要點',
        tags: ['逃生', '基礎'],
        content: '火災發生時，濃煙是最大的致命因素。掌握正確逃生原則可以大幅提高存活率。',
        steps: [
            { title: '1. 低姿逃生', content: '濃煙往上飄，彎腰或爬行前進，用濕毛巾摀住口鼻。' },
            { title: '2. 沿牆前進', content: '伸手觸摸牆壁前進，避免在濃煙中迷失方向。' },
            { title: '3. 不搭電梯', content: '火災時絕對不可搭乘電梯，可能停電或充滿濃煙。' },
            { title: '4. 關門阻煙', content: '離開房間時隨手關門，可阻擋火勢蔓延和濃煙擴散。' },
            { title: '5. 測試門把溫度', content: '開門前用手背試探門把溫度，如果很燙表示門外有火，不可開門。' },
        ],
        tips: ['平時記住逃生路線和安全出口位置', '不要為了拿貴重物品而耽誤逃生', '逃出後立即遠離建築物並報警'],
        warning: '切勿躲在浴室！浴室門多為塑膠材質，無法阻擋火勢和濃煙。',
    },
    'fr-2': {
        categoryId: 'fire',
        title: '滅火器的正確使用方法',
        summary: '各類滅火器的操作步驟',
        tags: ['滅火器', '操作'],
        content: '滅火器是最便利的初期滅火工具。記住「拉、瞄、壓、掃」四字口訣。',
        steps: [
            { title: '1. 拉 - 拉開安全插銷', content: '將滅火器提起，拉開安全插銷（通常是紅色）。' },
            { title: '2. 瞄 - 瞄準火源底部', content: '將噴嘴對準火源底部，而非火焰上方。' },
            { title: '3. 壓 - 壓下握把', content: '用力壓下握把，開始噴射滅火劑。' },
            { title: '4. 掃 - 左右掃射', content: '由近而遠，左右掃射覆蓋火源範圍。' },
        ],
        tips: ['站在上風處滅火，避免吸入煙霧', '滅火器有效射程約 3-5 公尺', '使用後即使未噴完也應更換或重新充填'],
        warning: '滅火器只適用於初期小火！如火勢已擴大，應立即逃生並報警。',
    },
    'fr-3': {
        categoryId: 'fire',
        title: '住宅防火安全檢查',
        summary: '居家環境的火災預防要點',
        tags: ['預防', '居家'],
        content: '火災預防勝於滅火。定期檢查居家環境可以大幅降低火災風險。',
        steps: [
            { title: '1. 檢查電線電器', content: '檢查是否有老舊、破損的電線，避免電線過載或捆綁使用。' },
            { title: '2. 爐火使用安全', content: '烹飪時不離開爐火，煮完後確認爐火關閉。使用微波爐時不放金屬容器。' },
            { title: '3. 確認煙霧偵測器', content: '定期測試煙霧偵測器功能，每年更換電池。' },
            { title: '4. 滅火器位置', content: '確保家中備有滅火器，放置在容易取得的位置，並定期檢查有效期限。' },
            { title: '5. 易燃物收納', content: '易燃物品（酒精、打火機、蠟燭）遠離火源，分類收納。' },
        ],
        tips: ['睡前確認所有電器關閉', '不在床上或沙發上吸菸', '延長線不要串接使用'],
    },
    // ===== 急救 (3) =====
    'fa-1': {
        categoryId: 'firstaid',
        title: 'CPR 心肺復甦術操作步驟',
        summary: '成人急救 CPR 的完整流程',
        tags: ['CPR', '急救'],
        content: '心肺復甦術 (CPR) 是在心臟停止跳動時維持血液循環的緊急措施。及時正確的 CPR 可以挽救生命。',
        steps: [
            { title: '1. 確認環境安全', content: '確保現場對你和傷患都是安全的。' },
            { title: '2. 檢查意識', content: '輕拍傷患肩膀並大聲呼喚：「你還好嗎？」' },
            { title: '3. 呼叫求救', content: '撥打 119 並請人取得最近的 AED。開啟擴音等待指示。' },
            { title: '4. 胸部按壓', content: '雙手交疊，掌根置於兩乳頭連線中點。手臂打直，身體垂直向下按壓 5-6 公分，速率每分鐘 100-120 下。' },
            { title: '5. 人工呼吸 (可選)', content: '壓額抬下巴，捏住鼻子，嘴對嘴吹氣 1 秒，觀察胸部起伏。30 次按壓後給予 2 次人工呼吸。' },
        ],
        tips: ['用力壓、快快壓、胸回彈、莫中斷', '如不願或不會人工呼吸，持續胸部按壓也有效', 'AED 到達後立即使用，按照語音指示操作'],
        warning: '不要因為擔心壓斷肋骨而不敢用力，救命比骨折重要！',
    },
    'fa-2': {
        categoryId: 'firstaid',
        title: 'AED 自動體外心臟電擊器使用指南',
        summary: '如何正確使用 AED 進行急救',
        tags: ['AED', '心臟'],
        content: 'AED（自動體外心臟電擊器）是為心室顫動患者提供電擊除顫的緊急設備。現代 AED 設計為任何人都可以使用。',
        steps: [
            { title: '1. 開啟電源', content: '打開 AED 蓋子或按下電源按鈕，機器會開始語音指導。' },
            { title: '2. 貼上電極片', content: '露出傷患胸部，依照電極片上的圖示貼在正確位置：一片在右鎖骨下方，一片在左側腋下。' },
            { title: '3. 分析心律', content: 'AED 會自動分析心律，此時請大家離開傷患身體，不要觸碰。' },
            { title: '4. 電擊 (如需要)', content: '如果 AED 指示需要電擊，確認沒有人接觸傷患後，按下電擊按鈕。' },
            { title: '5. 繼續 CPR', content: '電擊後或 AED 指示不需電擊時，立即繼續進行 CPR。' },
        ],
        tips: ['AED 有兒童模式，如為 8 歲以下或 25 公斤以下兒童需切換', '電極片不可重疊，要確實黏貼在皮膚上', '胸部有水分要先擦乾，有藥物貼片要先移除'],
    },
    'fa-3': {
        categoryId: 'firstaid',
        title: '止血與傷口處理',
        summary: '外傷出血的緊急處理方法',
        tags: ['止血', '外傷'],
        content: '外傷出血時，正確的止血和傷口處理可以防止失血過多和感染。',
        steps: [
            { title: '1. 保護自己', content: '如有手套或塑膠袋，先戴上避免直接接觸血液。' },
            { title: '2. 直接加壓止血', content: '用乾淨的布或紗布直接壓住傷口，持續施壓 10-15 分鐘。' },
            { title: '3. 抬高患肢', content: '如果是四肢出血，將患肢抬高於心臟位置可減緩出血。' },
            { title: '4. 包紮固定', content: '血止住後，用繃帶或布條包紮傷口，不要太緊。' },
            { title: '5. 觀察狀況', content: '持續觀察傷口是否滲血，以及傷患是否有休克症狀。' },
        ],
        tips: ['不要隨意移除已浸血的紗布，直接在上方再加一層繼續加壓', '鼻血時頭微向前傾，捏住鼻翼 10 分鐘', '若有異物刺入，不要拔除，固定後送醫'],
        warning: '如果是大量噴射性出血或 15 分鐘內無法止血，應立即撥打 119 尋求緊急救護。',
    },
    // ===== 避難 (2) =====
    'sh-1': {
        categoryId: 'shelter',
        title: '緊急避難包準備清單',
        summary: '避難包應包含的基本物資',
        tags: ['避難包', '準備'],
        content: '緊急避難包應事先準備好，放在容易取得的地方。建議每人準備一個，內容物需定期檢查更換。',
        steps: [
            { title: '飲水與食物', content: '礦泉水每人每日 3 公升，可存放 3 天份。餅乾、能量棒等不需烹煮的食物。' },
            { title: '重要文件影本', content: '身分證、健保卡、存摺、房契等重要文件的影本，裝入防水袋。' },
            { title: '醫療用品', content: '個人藥物、急救包、口罩、手套、消毒酒精。' },
            { title: '照明通訊', content: '手電筒、備用電池、行動電源、收音機。' },
            { title: '保暖衣物', content: '輕便雨衣、薄毯、保暖內衣褲。' },
            { title: '其他必需品', content: '現金（小額紙鈔和硬幣）、哨子、瑞士刀、衛生紙。' },
        ],
        tips: ['每半年檢查一次避難包，更換過期物品', '依照季節調整衣物內容', '如有嬰幼兒或老人，需額外準備專用物品'],
    },
    'sh-2': {
        categoryId: 'shelter',
        title: '避難收容所生活須知',
        summary: '入住避難所的規則與注意事項',
        tags: ['避難所', '生活'],
        content: '避難收容所是災害發生時提供臨時庇護的場所。入住期間請遵守相關規定，與其他避難者互助合作。',
        steps: [
            { title: '報到登記', content: '抵達避難所後，請先至服務台完成登記，提供姓名、聯絡方式及家庭成員資訊。' },
            { title: '遵守區域分配', content: '依照工作人員指示分配休息區域，請勿擅自佔用過大空間。' },
            { title: '維持環境整潔', content: '個人物品請收納整齊，垃圾依規定分類丟棄，公共區域使用後請清潔。' },
            { title: '遵守作息時間', content: '避難所設有熄燈時間（約晚上 10 點），請降低音量、關閉手機鈴聲。' },
            { title: '參與公共事務', content: '請配合輪值打掃、物資分發等公共事務。' },
            { title: '物資領取規則', content: '物資由工作人員統一發放。請依序排隊領取，不可囤積。' },
        ],
        tips: ['攜帶個人藥品並告知醫護人員用藥需求', '貴重物品請自行保管', '如需離開避難所，請先告知服務台', '感到身體不適應立即反映'],
        warning: '避難所禁止吸菸、飲酒及攜帶危險物品。若發現可疑人事物，請立即通報工作人員。',
    },
    // ===== 戰爭 (3) =====
    'wa-1': {
        categoryId: 'war',
        title: '空襲警報辨識與應變',
        summary: '認識防空警報類型與正確反應',
        tags: ['空襲', '警報'],
        content: '台灣的防空警報分為「緊急警報」和「解除警報」。聽到警報時應立即採取適當行動。',
        steps: [
            { title: '1. 辨識警報聲響', content: '緊急警報：長音 15 秒、停 5 秒，反覆鳴放。解除警報：長音 90 秒，一次鳴放。' },
            { title: '2. 聽到緊急警報立即避難', content: '停止一切活動，立即就近進入防空避難所或堅固建築物低樓層。' },
            { title: '3. 遠離玻璃窗戶', content: '爆炸震波會震碎玻璃，待在最內側無窗的空間。' },
            { title: '4. 保持蹲姿雙手護頭', content: '低姿勢蹲下，雙手交叉保護頭頸。' },
            { title: '5. 等待解除警報', content: '聽到解除警報後才可離開避難處所。' },
        ],
        tips: ['手機開啟災防告警訊息接收功能', '平時記住就近避難所位置', '在戶外時可躲入地下道、捷運站、地下停車場'],
        warning: '警報期間禁止使用電梯！慎防停電受困。',
    },
    'wa-2': {
        categoryId: 'war',
        title: '防空避難所使用指南',
        summary: '如何找到並正確使用防空避難設施',
        tags: ['防空', '避難所'],
        content: '台灣各地設有防空避難所，平時應知道住家和工作地點附近的避難所位置。',
        steps: [
            { title: '1. 查詢避難所位置', content: '可至內政部警政署網站或「防空疏散避難專區」APP 查詢附近避難所。' },
            { title: '2. 選擇避難場所', content: '優先選擇：地下防空洞 > 捷運站 > 地下停車場 > 堅固建物地下室。' },
            { title: '3. 攜帶必需品', content: '如時間允許，帶上避難包、手機、證件。' },
            { title: '4. 進入避難所', content: '保持冷靜，有序進入，不要推擠。協助老弱婦孺優先進入。' },
            { title: '5. 避難期間注意事項', content: '保持安靜，節省手機電量，聽從避難所管理人員指示。' },
        ],
        tips: ['避難所內不要使用明火', '如廁需求可使用塑膠袋加報紙', '彼此互助，分享資訊和物資'],
    },
    'wa-3': {
        categoryId: 'war',
        title: '戰時物資儲備與生存準備',
        summary: '戰爭期間的長期生存物資規劃',
        tags: ['物資', '儲備'],
        content: '戰爭期間可能面臨物資短缺和供應中斷。事先儲備可讓家庭有更長的生存緩衝時間。',
        steps: [
            { title: '1. 飲用水儲備', content: '每人每日需要 3 公升水，建議儲備 7-14 天份。可購買桶裝水或使用乾淨容器儲存。' },
            { title: '2. 糧食儲備', content: '米、麵條、罐頭、泡麵、餅乾等可長期保存的食品。注意輪替使用，避免過期。' },
            { title: '3. 醫療與衛生', content: '常備藥品（感冒藥、止痛藥、腸胃藥）、處方藥、急救用品、衛生用品。' },
            { title: '4. 能源與照明', content: '手電筒、電池、蠟燭、打火機、行動電源、太陽能充電器。' },
            { title: '5. 現金與文件', content: '準備現金（包含硬幣），重要文件正本及影本裝入防水袋。' },
            { title: '6. 通訊與資訊', content: '收音機（含電池）可接收政府廣播。記下緊急聯絡電話和家人約定的會合地點。' },
        ],
        tips: ['定期檢查儲備物資，更換過期品', '儲存位置要通風乾燥', '與家人確認緊急狀況下的聯絡與會合計畫'],
    },
    // ===== 核化災害 (2) =====
    'nu-1': {
        categoryId: 'nuclear',
        title: '核災事故應變與防護',
        summary: '核電廠事故發生時的自我保護措施',
        tags: ['核災', '輻射'],
        content: '核電廠事故可能釋放輻射物質。了解正確的防護措施可以大幅降低輻射暴露風險。',
        steps: [
            { title: '1. 進入室內', content: '立即進入堅固建築物內，關閉所有門窗和通風設備。' },
            { title: '2. 收聽官方訊息', content: '開啟廣播或電視，遵從政府指示行動。不要聽信謠言。' },
            { title: '3. 準備撤離', content: '如政府下達撤離命令，依指定路線撤離。攜帶避難包和證件。' },
            { title: '4. 服用碘片', content: '若政府通知發放碘片，依指示服用可保護甲狀腺。' },
            { title: '5. 個人除污', content: '如曾暴露於室外，進入室內後立即脫除外層衣物並淋浴。' },
        ],
        tips: ['建築物越厚實防護效果越好', '不要食用露天種植的蔬果', '寵物也需帶進室內', '保持電話暢通以接收緊急通知'],
        warning: '切勿自行前往核電廠或事故區域！應遠離事故地點，等待政府統一疏散指示。',
    },
    'nu-2': {
        categoryId: 'nuclear',
        title: '化學災害防護與應變',
        summary: '化學物質洩漏時的緊急處置',
        tags: ['化學', '毒氣'],
        content: '化學災害可能發生在工廠、運輸事故或恐怖攻擊時。快速正確的反應可以救命。',
        steps: [
            { title: '1. 辨識警訊', content: '刺鼻異味、煙霧、人員出現不適症狀都是化學洩漏的警訊。' },
            { title: '2. 迅速逃離', content: '朝上風處（風吹來的方向）逃離，化學物質通常隨風飄散。' },
            { title: '3. 掩護口鼻', content: '用濕布、濕毛巾或衣物掩住口鼻，減少吸入毒氣。' },
            { title: '4. 進入室內', content: '進入建築物，關閉門窗和空調，用濕布封住門窗縫隙。' },
            { title: '5. 除污清洗', content: '脫除受污染衣物，用大量清水沖洗皮膚和眼睛至少 20 分鐘。' },
        ],
        tips: ['化學物質可能比空氣重，避免躲進地下室或低窪處', '如果在車內，關閉車窗和空調', '有任何不適症狀應記下並告知救護人員'],
        warning: '不要嘗試撲滅化學火災或處理化學洩漏！立即報警並撤離。',
    },
    // ===== 設施故障 (2) =====
    'in-1': {
        categoryId: 'infrastructure',
        title: '停電應變與備援措施',
        summary: '大規模停電時的生活應變方法',
        tags: ['停電', '備援'],
        content: '停電可能持續數小時甚至數天。事先準備和正確應對可以將不便降到最低。',
        steps: [
            { title: '1. 確認停電範圍', content: '查看鄰居是否也停電。如只有自家停電，檢查配電箱是否跳電。' },
            { title: '2. 減少冰箱開啟', content: '冰箱在不開門的情況下可維持 4-6 小時低溫。優先食用容易腐壞的食物。' },
            { title: '3. 節省手機電量', content: '開啟省電模式，減少非必要使用。行動電源優先用於手機充電。' },
            { title: '4. 照明替代方案', content: '使用手電筒或 LED 燈。避免使用蠟燭以防火災。' },
            { title: '5. 關閉電器', content: '關閉或拔掉電器插頭，防止復電時產生電流突波損壞電器。' },
        ],
        tips: ['夏天注意防暑，多喝水、開窗通風', '冬天可穿多層衣物保暖', '了解社區是否有備援發電設備', '電動車可作為臨時供電來源'],
    },
    'in-2': {
        categoryId: 'infrastructure',
        title: '瓦斯外洩緊急處理',
        summary: '發現瓦斯外洩時的正確處置步驟',
        tags: ['瓦斯', '外洩'],
        content: '瓦斯外洩有爆炸和中毒的危險。發現異常時立即正確處置可以避免災難。',
        steps: [
            { title: '1. 禁止火源', content: '不可開關任何電器（包括電燈）、不可使用打火機、不可吸菸。' },
            { title: '2. 關閉瓦斯', content: '關閉瓦斯爐開關和瓦斯總開關（通常在瓦斯表旁邊）。' },
            { title: '3. 開窗通風', content: '打開所有門窗，讓空氣對流，瓦斯自然消散。' },
            { title: '4. 離開現場', content: '所有人立即離開室內，到戶外空曠處。' },
            { title: '5. 通報求援', content: '在室外使用手機撥打瓦斯公司緊急專線或 119。' },
        ],
        tips: ['在瓦斯爐旁安裝瓦斯警報器', '定期檢查瓦斯管線是否老舊', '外出和睡前確認瓦斯已關閉'],
        warning: '瓦斯比空氣重，會往低處沉積。發現瓦斯味時千萬不可按電鈴或開關電器！',
    },
    // ===== 戶外活動 (3) =====
    'od-1': {
        categoryId: 'outdoor',
        title: '露營安全與緊急應變',
        summary: '營地選址、用火管理、暴雨撤離、失溫處置完整指南',
        tags: ['露營', '野營', '安全'],
        content: '露營安全取決於行前準備與現場判斷。記住「先保命、再保暖、再求援」的優先順序。營地選擇決定 90% 的安全，用火三原則（離帳 3m、備水備土、人在火在）是必須遵守的紀律。',
        steps: [
            { title: '1. 營地選址', content: '選擇平坦、排水良好的地點。禁止紮營區域：河床、山谷最低點、懸崖邊 5m 內、獨立大樹下、有倒木或枯樹的區域。' },
            { title: '2. 帳篷搭設', content: '帳篷入口背對主風向，營釘 45 度角插入插到底，外帳與內帳保持 5-10cm 間隙，拉繩全部拉緊固定。' },
            { title: '3. 用火三原則', content: '離帳 3 公尺以上、備水備土在旁、人在火在離開即滅。用石頭圍成火圈，離開前用水淋熄並用土覆蓋。' },
            { title: '4. 天氣監控', content: '暴雨前兆：雲層快速增厚變暗、山谷傳來悶雷聲、氣溫突然下降、溪水顏色變濁水位上升。任一出現立即警戒。' },
            { title: '5. 暴雨撤離', content: '發現警訊立刻收拾重要物品（手機、證件、急救包），棄營往高處撤離，不要冒險渡溪或取回裝備。' },
            { title: '6. 失溫處置', content: '移至遮蔽處，脫除濕衣換乾衣，用睡袋包裹，在胸口腋下放溫熱水袋，給予溫熱飲料，持續監控意識。' },
        ],
        tips: [
            '出發前告知家人：地點、同行者、預計返回時間',
            '攜帶哨子（三短聲為國際求救訊號）和鏡子（日間反光求救）',
            '手機充滿電並下載離線地圖',
            '冷鏈斷鏈 2 小時內需使用易腐食材',
            '食物密封遠離帳篷存放，避免招引野生動物',
        ],
        warning: '遇到雷雨時立即離開帳篷和高處，丟下金屬物品，找較低的岩石區蹲下，雙手抱膝頭低下，人員分散 3 公尺以上！',
    },
    'od-2': {
        categoryId: 'outdoor',
        title: '野外求生基本技能',
        summary: '迷途處置、保暖庇護、取水淨水、求援訊號完整指南',
        tags: ['求生', '迷路', '求援'],
        content: '迷路時記住 STOP 原則：Stop（停下來）、Think（思考）、Observe（觀察）、Plan（計畫）。保命優先順序：遮蔽 → 保暖 → 水 → 食物。人可以 3 天不喝水、3 週不吃東西，但失溫可能 3 小時致命。',
        steps: [
            { title: '1. STOP 原則', content: 'Stop 停止移動（亂走只會離正確路徑更遠）→ Think 深呼吸穩定情緒 → Observe 觀察周圍地形和訊號 → Plan 決定待在原地或確定方向才移動。' },
            { title: '2. 建立庇護', content: '找避風處（岩石背風面、濃密樹叢），用緊急毯搭建簡易帳篷或找倒木庇護。隔離地面寒氣比遮風更重要，堆積落葉製作隔離層。' },
            { title: '3. 保暖防失溫', content: '保持乾燥（濕衣擰乾後穿回勝過不穿），用緊急毯包裹反光面朝內，往衣服內塞乾落葉製造空氣層，蜷曲身體減少散熱面積。' },
            { title: '4. 取水淨水', content: '順山谷往下找溪流，收集露水或雨水。淨水優先順序：煮沸 3 分鐘 > 淨水錠 30 分鐘 > 紫外線曝曬 6 小時。絕對禁止：飲用海水、尿液。' },
            { title: '5. 發出求救訊號', content: '三 = 求救：哨子每隔 10 秒吹三短聲、頭燈三閃、排列三堆火。日間用鏡子反光、揮動鮮豔衣物；夜間維持火堆。' },
            { title: '6. 待在原地', content: '待在原地比亂走更容易被搜救隊發現。將緊急毯攤開在地上增加反光效果，聽到直升機立刻揮手發出訊號。' },
        ],
        tips: [
            '求救電話：112（無訊號可跨網撥打）',
            '出發前告知他人完整行程資訊',
            '身上攜帶 EDC：哨子、鏡子、打火機、緊急毯',
            '穿著鮮豔外套便於搜救辨識',
            '夜間絕對不要移動，找安全處待到天亮',
        ],
        warning: '不要食用不認識的野生植物或菇類！許多有毒植物外觀與可食用植物相似。迷路時待在原地，只有 100% 確定方向才能移動！',
    },
    'od-3': {
        categoryId: 'outdoor',
        title: '露營食安與飲水',
        summary: '食材保存、交叉污染預防、腹瀉處置、淨水流程完整指南',
        tags: ['食安', '淨水', '衛生'],
        content: '野外食安三原則：冷鏈斷鏈 2 小時是關鍵、生熟分離徹底執行、水必經處理才安全。野外腹瀉會導致脫水，嚴重影響存活。記住「寧可餓、不可險；寧可渴、不亂喝」。',
        steps: [
            { title: '1. 食材保存', content: '冰磚放食材上方（冷空氣往下沉），0-2 小時安全、2-4 小時儘快用、超過 4 小時建議丟棄。無冷藏時優先選擇乾燥食品、罐頭、調理包。' },
            { title: '2. 生熟分離', content: '紅砧板 = 生食、綠砧板 = 熟食，刀具同樣分開。處理順序：先蔬菜 → 熟食 → 最後生肉。處理生肉後必須洗手並酒精消毒。' },
            { title: '3. 充分加熱', content: '家禽需達 74°C（肉質無粉紅、肉汁透明）、絞肉需達 71°C。湯品持續滾沸 3 分鐘以上。不確定是否熟就繼續加熱。' },
            { title: '4. 淨水三法', content: '煮沸持續滾 3 分鐘（高山需 5 分鐘、淨水錠投入等待 30 分鐘、透明瓶日照曝曬 6 小時。不可飲用：顏色異常、有臭味、靜止池塘水。' },
            { title: '5. 剩菜處理', content: '吃不完的熟食 2 小時內保冰，無法保冰就當餐吃完或丟棄。隔餐食用必須完全複熱至冒熱氣，複熱只能一次。' },
            { title: '6. 腹瀉處置', content: '停止進食可疑食物，持續小口補水（每次腹瀉後補 200ml），自製電解質液：1L 水 + 6 茶匙糖 + 半茶匙鹽。24 小時無改善應撤離就醫。' },
        ],
        tips: [
            '寧可餓一餐，不可食物中毒三天',
            '只用一塊砧板「有洗就好」是常見錯誤，洗不掉細菌',
            '看起來清澈的溪水也可能含病菌，必須淨化才能喝',
            '廚餘密封帶下山，絕不掩埋（會被動物挖出）',
        ],
        warning: '不確定的不吃、來源不明的水不喝！罐頭膨脹、生鏽、食材有異味黏液一律丟棄！',
    },
    // ===== 無線電通訊 (4) =====
    'ra-1': {
        categoryId: 'radio',
        title: '無線電基本概念與法規',
        summary: '頻率/頻道概念、執照規定、台灣 NCC 法規說明',
        tags: ['無線電', '法規', '執照'],
        content: '台灣的無線電管理由 NCC（國家通訊傳播委員會）主管。無線電頻率是國家資源，非法發射可處罰鍰或刑責。記住：僅「收聽」通常不違法，但「發射」需符合執照/頻段規定。',
        steps: [
            { title: '1. 頻率/頻道/頻段區別', content: '頻率：電磁波振盪速度（MHz）。頻道：預設的頻率組合。頻段：連續的頻率範圍。常見業餘頻段：VHF 144-146 MHz、UHF 430-440 MHz。' },
            { title: '2. 執照種類', content: '業餘無線電執照（需考試）、專用電臺執照（機構申請）、船舶電臺執照。部分低功率設備可免執照，但設備需 NCC 認證。' },
            { title: '3. 功率與調變', content: '功率：瓦特（W），越大傳越遠但耗電大。調變：FM 調頻（抗干擾佳）、AM 調幅（傳遠但易干擾）。一般手持機多為 FM。' },
            { title: '4. 天線與 SWR', content: '天線將訊號轉電波發送。SWR（駐波比）衡量匹配度，理想值 1:1，1.5:1 以下可接受。SWR 過高會損壞機器。' },
            { title: '5. 不得干擾原則', content: '不得干擾合法通訊、不得使用未核准頻率、不得超過法定功率。購買設備不代表可任意發射。' },
            { title: '6. 緊急情境', content: '生命危急時可使用任何頻率求救（事後需說明）。優先使用手機撥打 112/119。海上 VHF 16 頻道為國際求救頻道。' },
        ],
        tips: [
            '業餘無線電執照考試可至 NCC 網站查詢公告',
            '三等業餘為入門級，通過後可申請發照',
            '購買設備前確認是否有 NCC 認證標籤',
            '違法使用可能面臨 3 萬至 100 萬罰鍰或設備沒收',
        ],
        warning: '發射行為需執照！購買無線電設備不代表可以任意發射使用。請確認頻段規定與執照要求。',
    },
    'ra-2': {
        categoryId: 'radio',
        title: '無線電操作 SOP 與通聯禮儀',
        summary: '開機設定、呼叫格式、標準用語、通話紀錄',
        tags: ['操作', 'SOP', '禮儀'],
        content: '無線電通聯需遵守「先聽後說」原則，保持簡短清晰，使用標準呼叫格式確保雙方正確溝通。一次通話不超過 30 秒，說完「完畢」後換對方發話。',
        steps: [
            { title: '1. 開機與檢查', content: '長按電源鍵開機 → 確認電量 → 確認頻率/頻道 → 調整音量。出發前與隊友測試通話。' },
            { title: '2. 呼叫格式', content: '「[對方呼號]、[對方呼號]，這裡是 [自己呼號]，聽到請回答。」範例：「登山隊二號，這裡是登山隊一號，聽到請回答。」' },
            { title: '3. 回應格式', content: '「[對方呼號]，[自己呼號] 收到，請說。」範例：「登山隊一號，登山隊二號收到，請說。」' },
            { title: '4. 通話進行中', content: '按住 PTT 說話，放開 PTT 聽對方。一次通話控制在 30 秒內。使用「收到」確認、「復誦」重複確認。' },
            { title: '5. 結束通聯', content: '說「完畢」或「Over and out」。確認對方已收到後將機器設回待機。' },
            { title: '6. CTCSS/DCS 設定', content: '音頻/數位編碼可過濾不需要的通話。收發雙方需設定相同編碼。注意：這不是加密，他人仍可聽到。' },
        ],
        tips: [
            '常用術語：收到、請說、完畢、復誦、待一下、更正、未收到',
            '先聽 2-3 秒確認頻道無人使用再發話',
            '平時使用低功率省電，通訊不良時再切換高功率',
            '鎖鍵功能可防止誤觸改變設定',
        ],
        warning: '發話前務必確認頻道無人使用！長時間佔用頻道會干擾他人通訊。',
    },
    'ra-3': {
        categoryId: 'radio',
        title: '無線電故障排除與設備維護',
        summary: '常見問題診斷、天線檢查、電池管理、設備選購',
        tags: ['故障排除', '天線', '電池'],
        content: '無線電故障多可透過基本檢查排除：電源/電量、頻率設定、天線連接、CTCSS/DCS 設定。養成定期維護習慣可延長設備壽命。',
        steps: [
            { title: '1. 完全聽不到', content: '檢查：電源是否開啟 → 音量是否太低 → 電池是否沒電。解決：開機、調高音量、更換電池。' },
            { title: '2. 有雜音沒聲音', content: '檢查：頻率是否正確 → CTCSS/DCS 是否與對方相同。解決：確認設定一致。' },
            { title: '3. 對方聽不到我', content: '檢查：PTT 是否按實 → 天線是否鎖緊 → 是否在發話時說話太快/太小聲。解決：確實按住 PTT、鎖緊天線、靠近麥克風清楚說話。' },
            { title: '4. 通訊距離變短', content: '檢查：電量是否不足 → 天線是否損壞 → 地形遮蔽。解決：充電、檢查天線、移動位置、提高功率。' },
            { title: '5. 天線問題', content: '天線鬆動嚴重影響訊號。確認天線鎖緊、無彎折損壞。手握位置不要蓋住天線，垂直持握效果最佳。' },
            { title: '6. 電池管理', content: '出發前充滿電、攜帶備用電池、平時低功率省電、不用時關機、避免完全耗盡電量。' },
        ],
        tips: [
            '選購建議：VHF/UHF 雙頻手持機、5W 功率、IP54 以上防水、16 頻道以上',
            '團隊應使用相同品牌/規格便於設定與備援',
            '購買前確認設備是否有 NCC 認證，部分市售對講機不符台灣法規',
            '機器當機時關機重開通常可解決',
        ],
        warning: '購買不等於可用！部分無線電設備可發射的頻率需執照才能使用。購買前應確認用途與法規限制。',
    },
    'ra-4': {
        categoryId: 'radio',
        title: '戶外/救災情境通聯指南',
        summary: '隊伍分工、集合點規劃、LACES 回報、失聯處理、電量管理完整 SOP',
        tags: ['戶外', '救災', '通訊', 'SOP', 'LACES'],
        content: '通訊是團隊安全的命脈。採用三層頻道架構（主頻道、備用、緊急），定時回報使用 LACES 格式（位置/活動/狀況/預計/特殊），失聯處理口訣：三呼叫 → 換頻道 → 高功率 → 派人找 → 報案。',
        steps: [
            { title: '1. 通訊編組', content: '指揮/領隊（一號）：統籌決策、最高優先權。副領隊（二號）：備援指揮。押隊（三號）：隊尾監控、回報落後者。各小隊長：分隊對內聯繫。分配呼號並記錄於通訊計畫表。' },
            { title: '2. 三層頻道架構', content: '主頻道：全隊日常通聯。備用頻道：主頻故障/干擾時使用。緊急頻道：僅限 SOS 呼叫。切換時機由指揮宣布，緊急狀況優先使用緊急頻道避免佔用主頻。' },
            { title: '3. 定時回報（LACES）', content: 'L 位置（目前所在）、A 活動（正在做什麼）、C 狀況（人員狀態）、E 預計（抵達下一點時間）、S 特殊（需支援事項）。危險地形每 30 分鐘、一般行進每 1 小時、到達重要節點立即回報。' },
            { title: '4. 集合點設定', content: '出發前確定至少 2 個明顯地標作為集合點。約定等待時間（如 30 分鐘）。記錄：編號、名稱、位置描述、座標、等待時間。失散時往約定集合點移動。' },
            { title: '5. 失聯處理流程', content: '步驟 1：主頻呼叫 3 次（間隔 1 分鐘）。步驟 2：切換備用頻道再呼叫 3 次。步驟 3：切換高功率（H）在空曠處呼叫。步驟 4：派 2 人前往最後已知位置搜尋。步驟 5：30 分鐘未尋獲撥打 112/119。' },
            { title: '6. 電量管理', content: '分配原則：出發 100%、中途 ≥50%、返程 ≥30%、備用電池全程保留。省電：低功率、縮短通話、減少掃描、非值班者關機。剩 20% 時換備用電池。' },
        ],
        tips: [
            '緊急呼叫格式：「緊急呼叫×3！這裡是[呼號]。位置：[地點]。狀況：[說明]。需求：[支援]。完畢。」',
            '備援優先順序：手機 112/119 → 衛星通訊 → 哨子三短聲 → 鏡子反光 → 派人傳話',
            '超過約定回報時間 15 分鐘未回應即啟動失聯處理流程',
            '出發前檢核：全員通訊測試、頻道/CTCSS 一致、呼號分配、集合點確認',
            '押隊責任：確認無人落後、回報隊尾狀況、協助落隊者通訊',
        ],
        warning: '通訊是團隊安全的命脈！出發前務必：全員測試通過、頻道設定一致、電量充足、備用電池滿電。失聯超過 30 分鐘應立即撥打 119/112 報案。',
        // 擴展內容
        sections: [
            {
                title: '🎒 通訊裝備清單',
                content: '每人必備：無線電手持機（VHF/UHF 雙頻、5W）、備用電池（至少 1 組滿電）、耳機麥克風。指揮者額外：通訊計畫表、隊員名單、備用手持機。',
            },
            {
                title: '📍 回報內容範例',
                content: '「XX隊一號，這裡是XX隊三號。位置：三叉路口涼亭。狀況：全員到齊，無異常。預計 30 分鐘後抵達稜線。完畢。」',
            },
            {
                title: '🆘 緊急狀況處置',
                content: '人員受傷：立即通報指揮說明位置與傷況，確保傷者安全（遮蔽、保暖），派人接應救援。天氣惡化：指揮評估是否撤退，通報所有單位，清點人數依序撤離。通訊全面中斷：往約定集合點移動，使用備援通訊方式（手機、哨子），視野開闘處等待。',
            },
        ],
        faq: [
            { question: '多久沒回報算失聯？', answer: '超過約定回報時間 15 分鐘未回應，應啟動失聯處理流程。' },
            { question: '失聯後多久該報警？', answer: '內部搜尋 30 分鐘無結果，或判斷情況可能嚴重，立即撥打 119/112。' },
            { question: '電量剩多少該換備用電池？', answer: '剩餘 20% 時應切換備用電池，原電池留作最後備援。' },
            { question: '緊急呼叫可以打斷其他通話嗎？', answer: '可以。緊急呼叫優先，所有非緊急通訊應暫停。' },
            { question: '分隊行動時如何通訊？', answer: '各隊使用分配的頻道對內通聯，約定時間於主頻道回報指揮。' },
            { question: '押隊的通訊責任是什麼？', answer: '確認無人落後、回報隊尾狀況、協助落隊者通訊。' },
            { question: '如果只有一台無線電故障怎麼辦？', answer: '讓該人員緊跟持有正常設備的隊友，透過他轉達。' },
            { question: '夜間可以減少通訊嗎？', answer: '已紮營安全後可減少，但指揮或值班者應保持監聽。' },
        ],
        checklists: [
            {
                title: '出發前（集合點）',
                items: [
                    '所有機器滿電',
                    '備用電池滿電',
                    '頻道/CTCSS 設定一致',
                    '全員通訊測試通過',
                    '呼號分配並記錄',
                    '集合點確認（至少 2 處）',
                    '回報時間確認',
                    '緊急聯絡方式確認',
                ],
            },
            {
                title: '行進中',
                items: [
                    '定時回報',
                    '電量監控',
                    '重要節點即時回報',
                    '注意落隊者',
                    '異常立即通報',
                ],
            },
            {
                title: '緊急狀況',
                items: [
                    '保持冷靜',
                    '切換高功率',
                    '使用緊急呼叫格式',
                    '說明位置、狀況、需求',
                    '保持頻道暢通',
                    '同步手機報案',
                ],
            },
            {
                title: '撤離前',
                items: [
                    '全員點名',
                    '收齊所有設備',
                    '回報「準備撤離」',
                    '確認撤離路線',
                    '抵達後回報「平安抵達」',
                ],
            },
        ],
        pocketCard: [
            '【三層頻道】主頻道：日常 ｜ 備用：主頻故障 ｜ 緊急：SOS 專用',
            '【LACES 回報】L 位置｜A 活動｜C 狀況｜E 預計｜S 特殊',
            '【失聯處理】呼叫 3 次 → 換頻道 → 高功率 → 派人找 → 119/112',
            '【電量管理】出發 100%｜中途 50%+｜返程 30%+',
            '【求救方式】112 / 119 / 哨子三短聲 / 鏡子反光',
        ],
        searchTags: ['戶外通聯', '救災通訊', '無線電 SOP', '隊伍通訊', '登山無線電', '失聯處理', '電量管理', '備援通訊', '緊急呼叫', 'LACES', '手持機管理'],
    },
};

export default function ManualDetailPage() {
    const { id } = useParams<{ id: string }>();
    const navigate = useNavigate();

    const manual = id ? MANUAL_CONTENTS[id] : null;
    const category = manual ? MANUAL_CATEGORIES[manual.categoryId] : null;

    if (!manual || !category) {
        return (
            <div className="page manual-detail-page">
                <div className="manual-not-found">
                    <span style={{ fontSize: '64px' }}>📭</span>
                    <h2>找不到手冊</h2>
                    <p>這本手冊可能已被移除或連結錯誤</p>
                    <Button onClick={() => navigate('/manuals')}>
                        返回手冊列表
                    </Button>
                </div>
            </div>
        );
    }

    return (
        <div className="page manual-detail-page">
            {/* 頂部導航 */}
            <div className="manual-detail-header">
                <button
                    className="manual-back-btn"
                    onClick={() => navigate('/manuals')}
                >
                    ← 返回手冊列表
                </button>
                <div className="manual-breadcrumb">
                    <span style={{ color: category.color }}>{category.icon} {category.name}</span>
                </div>
            </div>

            {/* 主要內容 */}
            <Card className="manual-detail-card" padding="lg">
                <div className="manual-detail-title-section">
                    <h1 className="manual-detail-title">{manual.title}</h1>
                    <p className="manual-detail-summary">{manual.summary}</p>
                    <div className="manual-detail-tags">
                        {manual.tags.map((tag) => (
                            <Badge key={tag} variant="default" size="sm">
                                {tag}
                            </Badge>
                        ))}
                    </div>
                </div>

                {/* 警告區塊 */}
                {manual.warning && (
                    <div className="manual-warning">
                        <span className="manual-warning__icon">⚠️</span>
                        <p>{manual.warning}</p>
                    </div>
                )}

                {/* 內容 */}
                <div className="manual-detail-content">
                    <p>{manual.content}</p>
                </div>

                {/* 步驟 */}
                {manual.steps && (
                    <div className="manual-steps">
                        <h2>操作步驟</h2>
                        <div className="manual-steps-list">
                            {manual.steps.map((step, index) => (
                                <div key={index} className="manual-step">
                                    <div
                                        className="manual-step__number"
                                        style={{ backgroundColor: category.color }}
                                    >
                                        {index + 1}
                                    </div>
                                    <div className="manual-step__content">
                                        <h3>{step.title}</h3>
                                        <p>{step.content}</p>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                )}

                {/* 小技巧 */}
                {manual.tips && (
                    <div className="manual-tips">
                        <h2>💡 小技巧</h2>
                        <ul>
                            {manual.tips.map((tip, index) => (
                                <li key={index}>{tip}</li>
                            ))}
                        </ul>
                    </div>
                )}

                {/* 擴展區塊 */}
                {manual.sections && (
                    <div className="manual-sections">
                        {manual.sections.map((section, index) => (
                            <div key={index} className="manual-section">
                                <h2>{section.title}</h2>
                                <p>{section.content}</p>
                            </div>
                        ))}
                    </div>
                )}

                {/* 口袋卡 */}
                {manual.pocketCard && (
                    <div className="manual-pocket-card">
                        <h2>📇 口袋卡（速查）</h2>
                        <div className="pocket-card-box">
                            {manual.pocketCard.map((line, index) => (
                                <div key={index} className="pocket-card-line">{line}</div>
                            ))}
                        </div>
                    </div>
                )}

                {/* 檢核清單 */}
                {manual.checklists && (
                    <div className="manual-checklists">
                        <h2>✅ 檢核清單</h2>
                        <div className="checklists-grid">
                            {manual.checklists.map((checklist, cIndex) => (
                                <div key={cIndex} className="checklist-card">
                                    <h3>{checklist.title}</h3>
                                    <ul>
                                        {checklist.items.map((item, iIndex) => (
                                            <li key={iIndex}>
                                                <label>
                                                    <input type="checkbox" />
                                                    <span>{item}</span>
                                                </label>
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            ))}
                        </div>
                    </div>
                )}

                {/* FAQ */}
                {manual.faq && (
                    <div className="manual-faq">
                        <h2>❓ 常見問題</h2>
                        <div className="faq-list">
                            {manual.faq.map((item, index) => (
                                <details key={index} className="faq-item">
                                    <summary>Q{index + 1}：{item.question}</summary>
                                    <p>{item.answer}</p>
                                </details>
                            ))}
                        </div>
                    </div>
                )}
            </Card>

            {/* 離線可用標籤 */}
            <div className="manual-offline-badge">
                <span>📶</span> 此手冊支援離線存取
            </div>
        </div>
    );
}
